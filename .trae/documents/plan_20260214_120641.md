# 将硬编码数据迁移至 Supabase 数据库

我将把 `RecyclingApp` 中的硬编码 iPhone 机型数据迁移到 Supabase 数据库中，并更新应用以从数据库动态获取数据。

## 数据库架构设计 (Schema Design)
我将创建一个名为 `recycling_models` 的表，包含以下字段：
*   `id`: UUID (主键，默认生成)
*   `model`: Text (唯一，如 "iPhone 17 Pro Max")
*   `screen_price`: Numeric (屏幕维修价格)
*   `battery_price`: Numeric (电池维修价格)
*   `base_recycle_price`: Numeric (基础回收价)
*   `release_year`: Integer (发布年份)
*   `created_at`: Timestamp (创建时间)

## 实施步骤

1.  **安装数据库驱动 (Install Database Driver)**:
    *   安装 `pg` 和 `@types/pg`，以便在 Node.js 环境中运行迁移脚本。

2.  **创建并执行迁移脚本 (Create Migration Script)**:
    *   创建 `scripts/migrate-recycling-data.ts` 脚本。
    *   该脚本将：
        *   使用 `POSTGRES_URL_NON_POOLING` 连接数据库。
        *   如果不存在，则创建 `recycling_models` 表。
        *   解析 `recycling-app.tsx` 中的 CSV 数据。
        *   将所有记录插入表中 (使用 `INSERT ... ON CONFLICT DO NOTHING` 避免重复)。

3.  **执行数据迁移 (Execute Migration)**:
    *   运行脚本以填充数据库。

4.  **更新应用逻辑 (Update Application Logic)**:
    *   修改 `components/recycling-app.tsx`：
        *   引入 `supabase` 客户端。
        *   移除硬编码的 `initialCsvData` 和 `parseCSV` 函数。
        *   更新 `useEffect`，使用 Supabase API 从 `recycling_models` 表获取数据。
        *   处理数据加载状态 (Loading State)。

## 预期结果
回收模块将不再依赖代码中的硬编码字符串，未来您可以直接在数据库中更新价格和机型，无需重新部署代码。